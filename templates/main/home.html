{% extends "base_generic.html" %}
{% block content %}
<div class="p-7 gap-4 grid grid-cols-1 w-full pt-24 rounded-md">
    {% for event in events %}
        <a href="{% url 'event-detail' event.id event.naziv_eventa|slugify %}" class="sm:w-full md:w-4/5 lg:w-3/4 xl:w-3/6 mx-auto bg-stone-100 rounded-md">
            <div class="w-full cursor-pointer shadow-sm shadow-gray-200 rounded-md">
                <img class="aspect-video bg-cover w-full rounded-t-md min-h-40" src="{{ event.slika.url }}" />
                <div class="p-4">
                <span class="text-blue-600 font-normal text-base">{{event.mjesto_odrzavanja}}</span>
                <p class="font-semibold text-xl py-2">{{event.naziv_eventa}}</p>
                <p class="font-light text-gray-700 text-justify line-clamp-3">{{event.opis_eventa|truncatewords:20}}</p>
                <div class="flex flex-wrap mt-10 space-x-4 align-bottom">
                    <img class="w-10 h-10 rounded-full" src="{{ event.autor_objave.profile.image.url }}" />
                    <div class="flex flex-col space-y-0">
                    {% if event.placanje_ulaza%}
                        <p class="font-semibold text-base">Cijena ulaza: {{event.cijena_ulaza}}Kn</p>
                    {% else %}
                        <p class="font-semibold text-base">Besplatan ulaz</p>
                    {% endif %}
                    <p class="font-light text-sm">{{event.datum_odrzavanja}} u {{event.vrijeme_odrzavanja}}</p>
                    </div>
                    <br><br>
                </div>
                    <p id="zainteresirani-{{ event.id }}" class="font-light text-sm">zainteresirani: {{event.broj_zainteresiranih}}</p>
                    <p id="dolaze-{{ event.id }}" class="font-light text-sm">dolaze: {{event.broj_dolaze}}</p>
                </div>
            </div>
            {% if user.is_authenticated %}
                {% csrf_token %}
                <div class="grid grid-cols-2">
                    <button type="button" data-id="{{ event.id }}" data-field="1" value="{{ event.id }}" class="btn-dolazim bg-sky-500 hover:bg-green-500 transition-colors text-white font-bold py-2 px-4 rounded">Dolazim</button>

                    <button type="button" data-id="{{ event.id }}" data-field="2" value="{{ event.id }}" class="btn-zainteresiran bg-amber-400 hover:bg-green-500 transition-colors text-white font-bold py-2 px-4 rounded">Zainteresiran</button>
                </div>
            {% endif %}
        </a>
        <br>
    {% endfor %}
</div>
{% endblock content %}